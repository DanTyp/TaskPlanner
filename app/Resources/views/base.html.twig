<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>{% block title %}Welcome!{% endblock %}</title>
    {% block stylesheets %}{% endblock %}
    <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- podłanczam JS'a-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker3.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min.js"></script>
    <!--Funkcja definiująca datepickera, może wyglądać inaczej, można ją też umieścić niżej-->
    <script>
        $(document).ready(function () {
            $('.js-datepicker').datepicker({
                format: 'yyyy-mm-dd'
            });
        });
    </script>

</head>
<body>

    <div class="container">
    {% block content %}{% endblock %}
</div>


{% block body %}{% endblock %}
{% block javascripts %}

    <script>
        $(document).on('keyup', '.search', function () {
            
            
            var index = $(this).parent().parent().index(); //na poziomie <td> za pomocą funkcji index sprawdzam, którym jestem elementem
            
            var str = $(this).val().toLowerCase();

            var elements = $('.rowToFind');

            elements.map(function (i, element) {

                //var content = $(element).html();
                var content = $(element).children().eq(index).html(); //sprawdzam zawartość tego dziecka, nad którym mam okienko wyszukiwania

                if (content.toLowerCase().indexOf(str) !== -1) {
                    //$(element).slideDown();
                    $(element).show();
                } else {
                    //$(element).slideUp();
                    $(element).hide();
                }
            });
        });

{#        $(document).on('keyup', '#searchName', function () {

            var str = $(this).val().toLowerCase();

            var elements = $('.rowToFind');

            elements.map(function (index, element) {

                //var content = $(element).html();
                var content = $(element).children().eq(0).html(); //jeżeli usuniemy to children(0), wówczas będzie przeszykiwało wszystie pola wiersza,
                //a nie tylko pierwsze pole Name

                if (content.toLowerCase().indexOf(str) !== -1) {
                    //$(element).slideDown();
                    $(element).show();
                } else {
                    //$(element).slideUp();
                    $(element).hide();
                }
            });
        });#}

    </script>

    <script>


        // poniżej funkcja dla Description

{#        $(document).on('keyup', '#searchDescription', function () {

            var str = $(this).val().toLowerCase();

            var elements = $('.rowToFind');

            elements.map(function (index, element) {

                
                var content = $(element).children().eq(1).html(); //dlaczego nie działa?
                console.log(content);

                if (content.toLowerCase().indexOf(str) !== -1) {
                    //$(element).slideDown();
                    $(element).show();
                } else {
                    //$(element).slideUp();
                    $(element).hide();
                }
            });
        });#}
    </script>

{% endblock %}
</div>
</body>
</html>

